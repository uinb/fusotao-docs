# Basics

This chapter describes the top-level architecture of Fusotao, explaining each components and their interactions.

The following figure indicates the interaction between Fusotao components and other chains:

![](/overview.png ':size=75%')

## Runtime and container

Fusotao is a substrate-based blockchain system. Like any other decentralized networks, the peer node is the core component. 
In general terms, a Fusotao node is composed of an executable *container* and a *runtime* compiled to WASM bytecode.

The container involes some important but common components:

- Storage
- P2P networking
- Consensus
- RPC service
- Virtual machine

While the runtime indicates the business logic of this protocol. Specifically, the Fusotao runtime mainly includes a set of modules to verify the order matches executed out of this blockchain are valid.

- BABE/GRANDPA: Producing and finalizing blocks
- BEEFY/MMR: Generating bridging proofs
- Balance/TransactionPayment: Managing native token and gas
- OctopusAppchain/OctopusBridge: Managing validators and transfering between Fusotao and NEAR
- Verifier: Verifying order matching proofs 
- Token: Managing external reservable tokens
- Agent: Enable interoperability with other EVM-compatible chains
- Market: Managing the brokers and markets
- Chainbridge: Bridging to EVM-compatible chains

## Consensus

> TODO

## Account

An account in Fusotao network represents an identity of a person or an organization that is capable of making transactions or holding funds. 
Fusotao uses Sr25519 as its cryptography signature by default. Thus, a Sr25519 public key can be represented as an account since the associated private key could be used to sign a transaction. 
But an account doesn't have to be a cryptographical public key. In fact, any 32-bytes array could be treat as an account.

Some other account types that are not public keys:

- System Account

The system accounts are usually used for locking funds but their private keys are not existed. For example, the octopus bridge module uses an account without private key to receive $TAO then mint equally amount on NEAR. An system account is usually generated by a specific content with hash functions which emit a 32-bytes array.

- Mapping Account

A mapping account represents an identity from outer chains, currently only EVM-compatible chains. It requires that the account owner owns the secp256k1 private key to make transactions.

- Multi-signature Account

The Multisig pallet enables multiple parties to share responsibility for executing certain transactions. Any account holder can specify the accounts that are allowed to approve a multi-signature transaction and the minimum number of approvals required for a call to be dispatched to the runtime.

## Address

> TODO

## Codec 

All data types in the runtime are encoded in [SCALE Codec](https://github.com/paritytech/parity-scale-codec), which is designed for communication between runtime and the outer node.

The SCALE codec is in form of binary format and not self-describing in any way. It assumes the decoding context has all type information about the encoded data. If a type is defined in the runtime, the client library could automatically register the type according to the runtime metadata.
For example, the signed transactions, parameters of a query request and its response data are all SCALE encoded. 

## Submitting transactions

The easiest way to submit a transaction is through the [Polkadotjs App](https://polkadot.js.org/apps). This is online webapp for all substrate-based blockchains. On the left-upper corner, you need to specify a node endpoint to connect from which the webapp will automatically fetch the data.

We use the `transfer` as an example:

1. Click the `Developer` tab and select `Extrinsics`
2. In the first item, select the signer account which can be either inserted through the `Accounts` tab or injected from the [Polkadot Extension](https://polkadot.js.org/extension/)
3. From the module list, select `balances` which represents the native assets module, and on the right side, select `transfer` function.
4. The webapp will automatically render the parameters according to the chain runtime, in this scenario, they are `dest` and `value`. 
5. Clicking `Submit Transaction` will awake the extension and requires you to sign the transaction.

> Fusotao follows the tradition of bitcoin to use bigint to represent coins. If you want to transfer `1 TAO`, you need to input `1,000,000,000,000,000,000`.

![](/submit-trans.png)

## Querying runtime state

> TODO

